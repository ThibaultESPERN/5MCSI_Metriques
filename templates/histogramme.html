<html>
  <head>
    <meta charset="UTF-8" />
    <title>Histogramme</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  </head>
  <body>
    <div id="chart_div"></div>
    <script>
      google.charts.load('current', { packages: ['corechart'] });
      google.charts.setOnLoadCallback(drawChart);

      function drawBackgroundColor() {
      fetch('/paris/')
        .then(response => response.json())
        .then(data => {
          drawChart(data);
        });
      }
      
      function drawChart(data) {
        var dataArray = [['Date', 'Température', {role: 'style'}, {role: 'annotation'}]];
        data.results.forEach(entry => {
          var date = new Date(entry.Jour * 1000);
          var color = 'color: ' + getColorForTemperature(entry.temp);
          var annotation = date.toLocaleDateString();
          dataArray.push([date.toLocaleDateString(), entry.temp, color, annotation]);
        });
        var data = google.visualization.arrayToDataTable(dataArray);
        
        var options = {
          title: 'Évolution des températures de Paris pour les 16 prochains jours',
          legend: {position: 'none'},
          hAxis: {title: 'Date'},
          vAxis: {title: 'Température'},
          annotations: {
            alwaysOutside: true,
            textStyle: {
              fontSize: 12,
              color: '#000',
              auraColor: 'none'
            }
          }
        };
  
        var chart = new google.visualization.Histogram(document.getElementById('chart_div'));
        chart.draw(data, options);
    }
    </script>
  </body>
</html>
